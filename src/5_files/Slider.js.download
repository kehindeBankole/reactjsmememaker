function Slider(q,k,H,c){function y(a){if(f)for(var d=0;d<f;d++)if(a<=g[d]){var b=g[d-1];return(d-1+(a-b)/(g[d]-b))/(f-1)}return(a-h)/(l-h)}function r(a,d){a=parseFloat(a||n.val());b=a<h?0:a>l?1:y(a);e.css("left",100*b+"%");z(a,d)}function z(a,d){if(I){var b=p?e:A,c=parseFloat((p?B:e)[0].style.left);u.css({left:c+"%",width:parseFloat(b[0].style.left)-c+"%"})}C&&!d&&C(a);D&&E.text(a)}function F(a){a.preventDefault();a=b+(a.clientX-v)/x;p&&p.left()>a?a=p.left():w&&w.left()<a?a=w.left():0>a?a=0:1<a&&
(a=1);if(a!==b){v+=(a-b)*x;b=a;e.css("left",100*b+"%");a=b;if(f){var d=a*(f-1)>>0,c=g[d];a=(c+(a-d/(f-1))*(f-1)*((g[d+1]||l)-c)).toFixed(1/t/10>>0)}else a=parseFloat((Math.round((a*(l-h)+h)/t)*t).toFixed(Math.log(1/t)/Math.log(10)>>0));n.val(a);z(a)}}function G(){$("body").removeClass("nosel");$(document).off("vmousemove",F).off("vmouseup",G)}c=c||{};k=$(k);var n=$(q),m,h=c.min||0,l=c.max||100;q=q?n.val():c.val;var D=c.showVal,t=c.step||1,C=c.update,I=c.fill,g=c.percentiles||[],f=g.length;f&&(h=g[0],
l=g[f-1]);var e=$("<div/>",{"class":"mark m"+H}),E=$('<div class="slide-val">').appendTo(e);D&&E.text(q);var v,p,w,B,A,u,b=y(q),x;k.hasClass("slider")?(m=k.find(".slide-bar"),m.append(e),u=k.find(".fill")):(u=$('<div class="fill">'),k.addClass("slider"),m=$("<div/>",{"class":"slide-bar",width:"100%"}),m.append(u).append(e),k.append(m));e.css("left",100*b+"%");this.min=function(a){a&&(h=a,r());return h};this.max=function(a){a&&(l=a,r());return l};this.$marker=function(){return e};this.leftBound=function(a){p=
a;B=a.$marker()};this.rightBound=function(a){w=a;A=a.$marker()};this.left=function(){return b};this.set=function(a,c){var b=Math.log(1/t)/Math.log(10)>>0;a=Math.round(a*Math.pow(10,b))/Math.pow(10,b);n.val(a);r(a,c)};this.get=function(){return n.val()};this.setBG=function(a){m.css("background",a)};this.update=r;n.change(function(){r()});e.on("vmousedown",function(a){x=m.width();b=parseFloat(e[0].style.left)/100;v=a.clientX;$("body").addClass("nosel");cancelEvent(a);$(document).on("vmousemove",F).on("vmouseup",
G)})};
