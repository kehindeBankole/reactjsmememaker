$w=$(window);$d=$(document);
(function(c,ea,t,G,na){function oa(a){a.css({height:0});var b=parseInt(a.css("borderTopWidth"))+a[0].scrollHeight+parseInt(a.css("borderBottomWidth"));a.css({height:b})}function fa(a,b,d,r,R){b=b||100;R=pa&&R;var c,A,v,e,t,g,D=function(){var H=+new Date;H-e<b&&(!r||H-t<r)&&!R?c=setTimeout(D,b-(H-e)):(c=null,d||(g=a.apply(v,A),v=A=null))};return function(){v=this;A=arguments;e=+new Date;t||(t=+new Date);var r=d&&!c;c||(c=R?pa(D):setTimeout(D,b));r&&(g=a.apply(v,A),v=A=null);return g}}function ga(a,
b){b=b||150;return fa(a,b,!1,b)}function ba(a){a=a||c.event;a.cancelBubble=!0;a.stopPropagation&&a.stopPropagation()}function K(a){a=a||c.event;a.stopPropagation&&a.stopPropagation();a.preventDefault&&a.preventDefault();a.cancelBubble=!0;a.cancel=!0;return a.returnValue=!1}function ha(){var a={};c.location.href.replace(/[?&]+([^=&]+)=([^&]*)/gi,function(b,d,r){a[d]=r});return a}function X(a){var b=this,d=a.fixed,r=a.pad||0,c=a.w?Math.min(a.w,t.width()-2*r):"auto",u=a.h||"auto",A=a.top||0,v=a.opacity||
60,e=a.iframe,W=!!a.full,g=a.img,D=$(".BOX").length;W&&(d=!0,c=u="100%");var H=$("<div/>",{"class":"mask-back",css:{opacity:v/100,"z-index":5999+D}}),y=$("<div/>",{"class":"BOX ",css:{width:c,height:e?u+10:u,background:a.bg||"#fff",position:d?"fixed":"absolute",top:A,padding:r,"z-index":6E3+D}});W&&y.css("left",0);var L=function(){y.css({left:"50%",marginLeft:-y.width()/2-r})},l=function(){if(!W)if(L(),d)y.css({top:"50%",marginTop:-y.height()/2});else if(!A){var a=y.height()>t.height()?10:0;y.css({top:t.scrollTop()+
Math.max(t.height()/2-y.height()/2,a)})}},m=function(a){27===a.which&&n()},n=b.hide=function(d){a.onclose&&!0!==d&&!1===a.onclose(b)||(H.remove(),y.remove(),t.off("resize",L),G.off("keyup",m))};b.size=function(a,b,d){y.width(c=a).height(u=b);d&&l()};b.el=function(){return y};e=e?"<iframe width="+c+" height="+u+' frameborder=0 src="'+e+'"></iframe>':"";g&&(g=$('<img style="vertical-align:top;" src="'+g+'"/>'),v=function(){l();y.show();var a=g[0].height/g[0].width;c="auto"===c?Math.min(g[0].width,t.width()-
2*r):c;u=c*a;g.css({width:c,height:u})},g.load(v),g[0].complete&&v());y.html(g||e||a.html);a.hideX||y.append($('<div class="x">&times</div>').click(n));a.noMaskClick||(H.click(n),G.on("keyup",m));$("body").append(H).append(y);g||(l(),y.show());a.onopen&&a.onopen();t.on("resize",L)}function T(){return I.user&&I.user.id}function ra(a){e("Logging in");var b=$("#login-form");$.ajax({url:"/ajax_login",type:"post",dataType:"json",data:{email:b.find(".login-email").val(),pass:b.find(".login-pass").val(),
stay_logged:b.find(".login-stay-logged").prop("checked")?1:0},success:function(b){b.error?(e(!1),error_dialog(b.error)):(c.I=b.js_data,a?a():c.location.reload())}})}function Aa(){e("Logging out");$.ajax({url:"/ajax_logout",type:"post",success:function(){c.location.reload()}})}function sa(a){if(ta()){e("Signing up");var b=$("#signup-form");$.ajax({url:"/ajax_signup",type:"post",dataType:"json",data:{user:b.find(".login-user").val(),email:b.find(".login-email").val(),pass:b.find(".login-pass").val(),
stay_logged:b.find(".login-stay-logged").prop("checked")?1:0,"g-recaptcha-response":b.find(".g-recaptcha-response").val()},success:function(b){b.errors?(e(!1),$("#signup-box .login-msg").html("<li>"+b.errors.join("</li><li>")+"</li>")):(c.I=b.js_data,a?a():c.location.reload())}})}}function ta(){var a=$("#signup-form"),b=a.find(".login-user").val(),d=a.find(".login-email").val(),r=a.find(".login-pass").val(),c=a.find(".login-pass-again").val(),a=[];""!==b&&""!==d&&""!==r&&""!==c||a.push("Fill in all fields!");
r!==c&&a.push("Password mismatch, try again");-1!==b.search(" ")&&a.push("Username cannot contain spaces! Try dash or underscore.");8>r.length&&a.push("Password must be at least 8 characters");$(".g-recaptcha-response").val()||a.push("Please verify you are not a robot using the reCAPTCHA box");return a.length?(b=$("#signup-box .login-msg"),b.html("<li>"+a.join("</li><li>")+"</li>"),b[0].scrollIntoView&&b[0].scrollIntoView(),!1):!0}function U(a,b){var d=decodeURIComponent((ea.cookie.split("rootemail=")[1]||
"").split(";")[0]),d='<div id="login-wrap">'+(a?'<div class="login-title msg msg-white">'+esc(a)+"</div>":"")+'<div id="login-box" class="login-box"><h2>Login</h2><div class="login-msg"></div><div class="google-login-btn loading"><div class="google-login-logo"><div style="width:18px;height:18px;"><svg width="18px" height="18px" viewBox="0 0 48 48"><g><path fill="#EA4335" d="M24 9.5c3.54 0 6.71 1.22 9.21 3.6l6.85-6.85C35.9 2.38 30.47 0 24 0 14.62 0 6.51 5.38 2.56 13.22l7.98 6.19C12.43 13.72 17.74 9.5 24 9.5z"></path><path fill="#4285F4" d="M46.98 24.55c0-1.57-.15-3.09-.38-4.55H24v9.02h12.94c-.58 2.96-2.26 5.48-4.78 7.18l7.73 6c4.51-4.18 7.09-10.36 7.09-17.65z"></path><path fill="#FBBC05" d="M10.53 28.59c-.48-1.45-.76-2.99-.76-4.59s.27-3.14.76-4.59l-7.98-6.19C.92 16.46 0 20.12 0 24c0 3.88.92 7.54 2.56 10.78l7.97-6.19z"></path><path fill="#34A853" d="M24 48c6.48 0 11.93-2.13 15.89-5.81l-7.73-6c-2.15 1.45-4.92 2.3-8.16 2.3-6.26 0-11.57-4.22-13.47-9.91l-7.98 6.19C6.51 42.62 14.62 48 24 48z"></path><path fill="none" d="M0 0h48v48H0z"></path></g></svg></div></div><div class="google-login-text">Login with Google</div><div class="google-login-loading load load-dark"></div></div><div class="login-or">- OR -</div><form id="login-form" method="post"><div class="login-label">Email or Username</div><input class="login-email" type="text" autocomplete="email" value="'+
esc(d)+'"/><div class="login-label">Password <a class="login-forgot-link" href="/forgot" tabindex="-1">forgot?</a></div><input class="login-pass" type="password"/><label class="login-stay-wrap"><input type="checkbox" class="login-stay-logged" checked="checked" value="1"/><span class="checkbox-text"> Stay Logged In</span></label><div class="b but lrg login-btn">Login</div></form></div><div id="signup-box" class="login-box"><h2>Sign Up</h2><div class="login-msg"></div><form id="signup-form" method="post"><div class="login-label">Email</div><input class="login-email" type="email" autocomplete="email"/><div class="login-label">Username</div><input class="login-user" type="text" maxlength="32"/><div class="login-label">Password</div><input class="login-pass" type="password"/><div class="login-label">Password again</div><input class="login-pass-again" type="password"/><label class="login-stay-wrap"><input type="checkbox" class="login-stay-logged" checked="checked" value="1"/><span class="checkbox-text"> Stay Logged In</span></label><div class="g-recaptcha" data-sitekey="6Lf0rggTAAAAAAwrUfoyjuhbdFumfFFF3fgmUa8D"></div><div class="y but lrg login-btn">Sign Up</div></form></div></div>',
r=new X({html:d,bg:"transparent"});$.getScript("https://apis.google.com/js/platform.js?onload=googleAuthInit");$.getScript("https://www.google.com/recaptcha/api.js");V=function(){b?(e(!1),r.hide(),initData(!0),b()):c.location.reload()};$("#login-form .login-btn").on("click",function(){ra(V)});$("#signup-form .login-btn").on("click",function(){sa(V)});$("#login-form input").on("keydown",function(a){13===a.which&&ra(V)});$("#signup-form input").on("keydown",function(a){13===a.which&&sa(V)});$("#login-form .login-email").val()?
$("#login-form .login-pass").focus():$("#login-form .login-email").focus()}function Ba(a){a=a.getAuthResponse(!0);e("Logging in");var b=ha();$.ajax({type:"POST",url:"/ajax_google_login",data:{id_token:a.id_token,claim_iid:b.claim_iid},dataType:"json",success:function(a){a.error?(e(!1),error_dialog(a.error)):(c.I=a.js_data,b.claim_iid?c.location="/i/"+(~~b.claim_iid).toString(36)+"?herp="+ +new Date:V?V():c.location.reload())}})}function ia(){var a=$("#nt-count"),b=+a.text(),d=$("#nt-nots-mini");d.hide();
d=d.find(".nt-new");b-=d.length;d.removeClass("nt-new");a.text(b);1>b&&a.removeClass("has-nots");G.off("click",ia)}function Ca(a){K(a);var b=$("#nt-nots-mini");"none"===b.css("display")?(b.show(),""===b.html()&&(b.html('<div class="load load-dark"></div>'),$.ajax({url:"/ajax_get_nots?limit=5",dataType:"json",success:function(a){a.error?error_dialog(a.error):($("#nt-count").text(a.count).toggleClass("has-nots",0<a.count),b.html(a.html).append("<a class='nt-btn' href='/notifications'>View All Notifications</a>"))}}),
b.click(ba)),G.on("click",ia)):ia()}function Da(){var a=$(this).closest(".com").attr("id").substr(3);confirm("Delete comment?")&&$.ajax({url:"/ajax_com_delete",type:"post",dataType:"json",data:{cid:a},success:function(b){b.error?error_dialog(b.error):$("#com"+a).slideUp(function(){$(this).remove()})}})}function Ea(){var a=$(this),b=a.closest(".com").attr("id").substr(3);confirm("Are you sure you want to flag this comment for violating the Imgflip Terms of Use? If you disagree with someone but they are not breaking the rules, use the downvote button!")&&
(e("Flagging comment"),$.ajax({url:"/ajax_com_flag",type:"post",data:{cid:b},dataType:"json",success:function(b){e(!1);b.error?error_dialog(b.error):(MSG("Flag submitted successfully!","green"),a.remove())}}))}function Fa(){if(T())if(I.user.email_verified||I.user.pro_type){var a=$(this).closest(".com"),b=a.find(".c-new-wrap");b[0]?b.find(".c-new-text").val()||b.remove():(b=$("#c-new-main").clone(),b.attr("id",""),a.append(b),b.find(".c-new-text").focus())}else ja();else U()}function ja(){DLG("Email Verification Required",
'To leave a comment, your email address must be verified (Pro accounts and Google Login are auto-verified). If you are a new user, just check your email and find the "Verify your Imgflip email" message. Otherwise, you can either login with Google, subscribe to Imgflip Pro, or re-send the verification email using the button in your <a href="/settings">Imgflip settings</a>.')}function ua(a,b){var d=!a.hasClass("set"),r=$(b)[0];r&&(r.muted=!d,a.toggleClass("set",d))}function ca(a){t[!1===a?"off":"on"]("keydown",
Ga)}function Ga(a){if(!(a.metaKey||a.ctrlKey||a.altKey))switch(a.which){case 83:case 72:Z(img.id,0,".img-vote-wrap");break;case 87:case 76:Z(img.id,1,".img-vote-wrap");break;case 68:va();break;case 74:case 39:$("#img-next").click();break;case 75:case 37:$("#img-prev").click();break;case 65:c.history.back()}}function va(){var a,b=$(this).attr("id")||"hotkey",d=function(){a?c.location=a:setTimeout(d,10)};_gaq.push(["_set","hitCallback",d]);_gaq.push(["_trackEvent","Flip Nav",b,location.href]);$.get("/ajax_img_flip?current_iid="+
(c.img?c.img.id>>0:0),function(b){a=b;c.gaon||d()})}function Z(a,b,d){if(I.done)if(!T())U();else if(a){var r=$(d);d=r.find(".img-up");var r=r.find(".img-down"),c=d.hasClass("set"),u=r.hasClass("set"),e=-1;d.add(r).removeClass("set");b||u?b&&!c&&(d.addClass("set"),e=1):(r.addClass("set"),e=0);$.ajax({url:"/ajax_vote",type:"post",dataType:"json",data:{new_vote:e,iid:a},success:function(a){a.error&&error_dialog(a.error)}})}}function Ha(){if(I.done)if(T()){var a=$(this),b=a.closest(".com").attr("id").substr(3)>>
0,d="#com"+b,r=a.hasClass("set"),c=a.hasClass("c-up"),e=0;c?e=r?-1:1:!r&&$(d+" .c-up").hasClass("set")&&(e=-1);d=$(d+" .c-points").first();e=parseInt(d.text())+e;d.text(e+(1===e?" up":" ups"));a.parent().find(".set").removeClass("set");r||a.addClass("set");$.ajax({url:"/ajax_comment_vote",type:"post",dataType:"json",data:{new_vote:r?-1:c?1:0,cid:b},success:function(a){a.error&&error_dialog(a.error)}})}else U()}function ka(a,b){if(a&&!la){var d=b.data("meme-iid")>>0,r=b.find(".c-new-text").val()||
"",R=b.closest(".com"),u=(R.attr("id")||"").substr(3)||0,A="";d||r||(A+="<li>Enter some text</li>");""!==A?error_dialog(A):(la=!0,e("Adding comment"),$.ajax({url:"/ajax_add_comment",type:"post",dataType:"json",data:{text:r,iid:a,comImage:d,parent_id:u,level:u?~~R.data("l")+1:0},success:function(a){if(a.error)error_dialog(a.error);else{for(var r=$(a.com_html),e=0;e<a.gif_video_iids.length;e++)c.gifVideoIids.push(a.gif_video_iids[e]);u?(b.remove(),R.after(r)):(b.find(".c-new-text").val(""),d&&b.removeClass("has-pending-img").data("meme-iid",
null).find(".c-pending-img").remove(),a=$("#img-coms"),a.append(r),a=a.offset().top+a.innerHeight()-(t.scrollTop()+t.height()),0<a&&$("html,body").animate({scrollTop:"+="+(a+150)}));ma(r)}},complete:function(){e(!1);la=!1}}))}}function ma(a){var b=I.user;if(b.id){var d,r,c;$(a||".com").quickEach(function(){d=this.attr("id").substr(3);I.com_votes[d]&&(r="1"===I.com_votes[d]?".c-up":".c-down",this.find(r).addClass("set"));var a=this.data("uid");(3<=b.priv||b.id==a||-1!==img.stream_mod_uids.indexOf(b.id))&&
!this.find(".c-delete")[0]&&this.find(".c-title").before('<div class="c-delete a">delete</div>');c=this.find(".c-text");c.is(":empty")&&!c.data("text")||this.find(".c-title").before('<div class="c-flag a">flag</div>');if(I.blocked_cids&&I.blocked_cids[d]&&!this.hasClass("hidden")){this.addClass("hidden");for(var a=~~this.data("l"),e=this.next();~~e.data("l")>a;)e.addClass("child-of-bad"),e=e.next();this.prepend('<div class="bad-com"><span class="bad-com-btn">blocked comment (click to show)</span></div>')}})}}
function e(a){!1===a?(Y&&Y.remove(),da=Y=!1):(Y||(Y=$('<div id="site-loading"><div id="site-loading-inner"><div class="load"></div><div id="site-loading-msg"></div><div id="site-loading-bar"><div id="site-loading-progress"></div></div></div></div>'),$("body").append(Y)),$("#site-loading-msg").html(a||"Loading"))}function Ia(){var a='<div class="img-flag-popup" data-iid="'+$(this).data("iid")+'"><div class="img-flag-title">Flag Image</div><div class="img-flag-label">Reason:</div><div class="select img-flag-select-wrap"><select class="img-flag-select"><option value></option>'+
(3<=I.user.priv?'<option value="img-sfw">SFW</option>':"")+'<option value="img-nsfw">NSFW (adult/mature content)</option><option value="img-flag-wrong-stream">Wrong Stream (violates stream posting rules)</option><option value="img-spam">Spam (advertising, website spam, etc)</option><option value="img-abuse">Abuse (anything breaching our Terms of Service)</option></select></div><div class="img-flag-label">Additional Comments [optional]</div><textarea class="img-flag-text" maxlength="200"></textarea><div class="img-flag-submit b but">Submit</div><div class="img-flag-cancel l but">Cancel</div></div>';
BOX.show({html:a})}function Ja(){BOX.hide()}function Ka(){var a=$(this).closest(".img-flag-popup"),b=a.data("iid"),d=a.find(".img-flag-select").val(),a=a.find(".img-flag-text").val();d?(e(),$.ajax({url:"/ajax_flag",type:"post",dataType:"json",data:{iid:b,type:d,text:a},success:function(a){e(!1);BOX.hide();$('.img-flag-btn[data-iid="'+b+'"]').remove();a.error?MSG(a.error,"red"):MSG(a.message,"green")}})):MSG("Select a reason","red")}function wa(a){var b=ha().stream||"";c.streamIsPrivate?xa(a,b):(e(),
$.get("/ajax_submit_popup",{iid:a,stream:b},function(b){e(!1);BOX.show({html:b,bg:"transparent"});$("#submit-submit").click(function(){$("#submit-certify").prop("checked")?xa(a,$("#submit-stream-select").val()):error_dialog("To submit your image you must certify its integrity by checking the box")});$("#submit-cancel").click(function(){BOX.hide()});$("#submit-stream-select").change(function(){var a=$(this).find(":selected");$("#submit-stream-description").text(a.data("description"));$(".submit-rule-fun").toggle(!!a.data("fun"));
$(".submit-rule-featured").toggle(!!a.data("featured"))}).change();$("#submit-details-btn").click(function(){var a=$(".submit-rule");a.toggleClass("submit-rule-open",!a.eq(0).hasClass("submit-rule-open"))});$(".submit-rule-title").click(function(){$(this).closest(".submit-rule").toggleClass("submit-rule-open")})}))}function xa(a,b){BOX.hide();e("Submitting image");$.ajax({url:"/ajax_submit_creation",type:"post",dataType:"json",data:{iid:a,stream:b},success:function(a){e(!1);a.error?error_dialog(a.error):
BOX.show({html:"<h2>Image submitted successfully!</h2><p>"+a.msg_html+"</p>",w:400,pad:20})}})}c.ROTATE_SVG='<svg x="0px" y="0px" width="50px" height="50px" viewBox="0 0 50 50" enable-background="new 0 0 50 50" xml:space="preserve"><path d="M41.038,24.1l-7.152,9.342L26.734,24.1H31.4c-0.452-4.397-4.179-7.842-8.696-7.842c-4.82,0-8.742,3.922-8.742,8.742 s3.922,8.742,8.742,8.742c1.381,0,2.5,1.119,2.5,2.5s-1.119,2.5-2.5,2.5c-7.576,0-13.742-6.165-13.742-13.742 s6.166-13.742,13.742-13.742c7.274,0,13.23,5.686,13.697,12.842H41.038z"/></svg>';
c.X_SVG='<svg class="x-svg" viewBox="0 0 10 10"><path d="M3,3l4,4"/><path d="M3,7l4,-4"/></svg>';I=c.I||{user:{}};c._gaq=c._gaq||[];c.console||(console={});console.log||(console.log=function(){});var La=+new Date,ya={};c.onerror=function(a,b,d,c,e){if("Script error."!==a&&"Script error"!==a||b&&"0"!==d){var u=a+b+d+"|"+c;ya[u]||(ya[u]=!0,_gaq.push(["_trackEvent","jsError",a,b+" ["+d+"]",+new Date-La]),Ma("js_error",{msg:a,file:b,line:d,col:c||"",stack:e?e.stack:""}))}};var za=0,Ma=c.ajaxDebug=function(a,
b){100<=za||(za++,$.ajax({url:"/ajax_debug",type:"post",data:{name:a,data:b}}))};$.ajaxSetup({cache:!0});$(ea).ajaxError(function(a,b,d,c){"/"===d.url[0]&&"/ajax_get_le_data"!==d.url&&(_gaq.push(["_trackEvent","ajaxError",d.url,(b.status||"")+"|"+(b.responseText||"").substr(0,100)+"|"+c]),d.error||Na())});var Na=c.handleRequestError=function(){e(!1);error_dialog("Request error. Try again in a minute. If this keeps happening, and other websites (e.g. google.com) still load fine, let us know with the Feedback button!")},
Oa=$.ajax;$.ajax=function(a){a.type&&"post"===a.type.toLowerCase()&&(a.data=a.data||{},c.FormData&&a.data instanceof FormData?a.data.append("__tok",I.__tok):a.data.__tok=I.__tok);return Oa(a)};$d.on("submit","form",function(){var a=$(this);if("post"===a.attr("method")&&!a.find("input[name=__tok]")[0]){if(!I.__tok)return error_dialog("Cannot perform this action until page has finished loading. If this persists, refresh the page."),!1;a.append('<input type="hidden" name="__tok" value="'+esc(I.__tok)+
'"/>')}});$d.on("input focus","textarea",function(a){oa($(a.target))});t.on("resize",fa(function(){$("textarea").each(function(){oa($(this))})}));$.fn.quickEach=function(){var a=jQuery([1]);return function(b){var d=-1,c,e=this.length;try{for(;++d<e&&(c=a[0]=this[d])&&!1!==b.call(a,d,c););}catch(u){throw delete a[0],u;}delete a[0];return this}}();var pa=c.requestAnimationFrame||c.mozRequestAnimationFrame||c.webkitRequestAnimationFrame||c.msRequestAnimationFrame;c.debounce=fa;c.throttle=ga;c.stopProp=
ba;c.cancelEvent=K;var Pa={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;","/":"&#x2F;","`":"&#x60;","=":"&#x3D;"};c.esc=function(a){return String(a).replace(/[&<>"'`=\/]/g,function(a){return Pa[a]})};c.GET=ha;Array.prototype.indexOf||(Array.prototype.indexOf=function(a,b){for(var d=b||0;d<this.length;d++)if(this[d]==a)return d;return-1});String.prototype.trim||(String.prototype.trim=function(){return this.replace(/^\s+|\s+$/g,"")});webkitWarn=function(a){var b=navigator.userAgent,d="";
-1===b.search(/webkit|firefox/i)&&(d+="Please note: the "+a+' performs best in a modern web browser such as <a href="https://www.google.com/chrome">Chrome</a> or <a href="https://www.mozilla.org/firefox">Firefox</a>',-1!==b.search(/MSIE [6-9]/)&&(d+=' <p style="color:#f44">Internet Explorer versions 6-9 tend to be very error prone</p>'));d&&$("#gen-qa").prepend("<h2>"+d+"</h2>")};var aa;c.Box=X;c.BOX={show:function(a){return aa=new X(a)},hide:function(){aa&&aa.hide()},size:function(){aa&&aa.size()}};
DLG=function(a,b){BOX.show({html:"<p><b>"+a+"</b></p><p>"+b+"</p>",w:400,pad:20})};error_dialog=function(a){DLG("Error",a)};MSG=function(){var a,b;return function(d,c,e){!1===d?a&&a.hide():(c=c||"white",e=e||5E3,a||(a=$('<div id="quick-msg">').appendTo("body")),a.attr("class","msg msg-"+c).html(d).css("margin-left","-50%").css({"margin-left":-a.outerWidth()/2,top:10}).stop().fadeIn(200),clearTimeout(b),b=setTimeout(function(){a.fadeOut(1E3)},e))}}();c.Dragger=function(a,b,d,c){function e(a,f,b,k,
Q,c){l=a;m=f;n=b;p=k;Q!==na&&null!==Q&&(z=Q,F=Math.floor((z+90)/360));a=z?"rotate("+z+"deg)":"";d&&d(l,m,n,p,z);f={transform:a,left:~~l-1,top:~~m-1,width:~~n,height:~~p};c&&(f.transform+=(z?" ":"")+"scale3d(0,0,0)");H.css(f);c&&(H.css({transition:"1s",transform:a+(z?" ":"")+"scale3d(1,1,1)"}),setTimeout(function(){H.css({transition:""})},1500))}function u(a){K(a);w=y.width();x=y.height();C=n;M=p;N=l;O=m;P=a.clientX;S=a.clientY;Q=-Math.sin(z/180*Math.PI)*(p/2+20);f=-Math.cos(z/180*Math.PI)*(p/2+20);
$("body").addClass("nosel");G.on("vmousemove",t).on("vmouseup",W);10===q&&(L||(L=$('<div class="drag-rotate-msg">'),H.parent().append(L)),qa(),L.show())}function t(a){if(q){E=a.clientX-P;J=a.clientY-S;l=N;m=O;1===q&&(l=N+E,m=O+J,D&&0===z%360?(0>l?l=0:l+n>w&&(l=w-n),0>m?m=0:m+p>x&&(m=x-p)):(l+n<g?l=g-n:l>w-g&&(l=w-g),m+p<g?m=g-p:m>x-g&&(m=x-g)),D||0!==z%180||(3>Math.abs(l)?l=0:3>Math.abs(l+n-w)&&(l=w-n),3>Math.abs(m)?m=0:3>Math.abs(m+p-x)&&(m=x-p)));if(10===q){var b=f-J;a=Math.atan((Q+E)/b)/Math.PI*
180;var k=Math.abs(a%90);if(2>k||88<k)a=90*Math.round(a/90);0<b&&(a+=180);b=(z-360*F)%360;-90<=a&&0>a&&270>=b&&180<b?F++:-90<=b&&0>b&&270>=a&&180<a&&F--;z=a+360*F;qa()}a=0===z%360;a||(b=v(E,J,-z),E=b.x,J=b.y);if(B)if(6===q||8===q)E=Math.round(B*J);else if(7===q||9===q)E=-Math.round(B*J);var d=k=b=!1,c=!1;if(2===q||6===q||7===q)m=O+J,p=M-J,D&&a?0>m&&(m=0,p=M+O):m+p<g?p=g-m:m>x-g&&(m=x-g,p=M+O-m),p<g&&(p=g,m=O+M-g),!D&&a&&3>Math.abs(m)&&(p+=m,m=0,b=6===q,d=2!==q);else if(4===q||8===q||9===q)p=M+J,D&&
a?m+p>x&&(p=x-m):p<g-m&&(p=g-m),p<g&&(p=g),!D&&a&&3>Math.abs(m+p-x)&&(p=x-m,b=9===q,d=4!==q);if(5===q||6===q||9===q)l=N+E,n=C-E,D&&a?0>l&&(l=0,n=C+N):l+n<g?n=g-l:l>w-g&&(l=w-g,n=C+N-l),n<g&&(n=g,l=N+C-g),!D&&a&&3>Math.abs(l)&&(n+=l,l=0,k=6===q,c=5!==q);else if(3===q||7===q||8===q)n=C+E,D&&a?l+n>w&&(n=w-l):n<g-l&&(n=g-l),n<g&&(n=g),!D&&a&&3>Math.abs(l+n-w)&&(n=w-l,k=7===q,c=3!==q);B&&(d&&(b&&(l+=n-Math.round(B*p)),n=B*p),c&&(k&&(m+=p-Math.round(n/B)),p=n/B));a||1===q||10===q||(a=l-N+(n-C)/2,b=m-O+
(p-M)/2,l-=a,m-=b,b=v(a,b,z),l+=b.x,m+=b.y);e(l,m,n,p,z)}}function v(a,f,b){var k=Math.sqrt(a*a+f*f);f=k?Math.asin(f/k):0;0>a&&(f=Math.PI-f);f+=b/180*Math.PI;return{x:Math.cos(f)*k,y:Math.sin(f)*k}}function qa(){L.text("rotation: "+Math.round(10*z)/10+"\u00b0")}function W(){10===q&&L.hide();q=0;B&&(B=n/p);$("body").removeClass("nosel");G.off("vmouseup",W)}c=c||{};var g=c.minWidth||20,D=c.enforceBoundary!==na?c.enforceBoundary:!0,H=$(a),y=$(b),L,l=0,m=0,n=g,p=g,z=0,F=0,B,N,O,C,M,q,E,J,w,x,P,S,Q,f,
k="N E S W NW NE SE SW".split(" ");a="";for(b=0;b<k.length;b++)a=4>b?a+('<div class="wrap'+k[b]+'"><div class="resize '+k[b]+'" data-dir="'+k[b]+'"></div></div>'):a+('<div class="resize '+k[b]+'" data-dir="'+k[b]+'"></div>');c.enableRotate&&(a+='<div class="drag-rotate-wrap"><div class="resize drag-rotate">'+ROTATE_SVG+"</div></div>");this.getVals=function(){return{x:l,y:m,w:n,h:p,rotation:z}};this.setVals=e;this.constrainVals=function(){if(0===z){w=y.width();x=y.height();var a=l,f=m,b=n,k=p;D?(0>
a&&(a=0),0>f&&(f=0),b>w&&(k*=w/b,b=w),k>x&&(b*=x/k,k=x),a>w-b&&(a=w-b),f>x-k&&(f=x-k)):(a+b<g&&(a=g-b),f+k<g&&(f=g-k),a>w-g&&(a=w-g),f>x-g&&(f=x-g));a===l&&f===m&&b===n&&k===p||e(a,f,b,k,z)}};this.lockRatio=function(){B=n/p};H.on("vmousedown",function(a){q=1;u(a)}).on("vmousedown",".resize",function(a){q=$(this).hasClass("drag-rotate")?10:k.indexOf($(this).attr("data-dir"))+2;u(a)});H.append(a)};c.hoverGifs=function(a){$(a).find("a img").each(function(){var a=$(this)[0];$(this).hover(function(){a.src=
a.src.replace(/\/2\/([a-z0-9]+)\.jpg/,"/$1.gif")},function(){a.src=a.src.replace(/\/([a-z0-9]+)\.gif/,"/2/$1.jpg")})})};applyTips=function(a){(a&&a.jquery?a.find(".tip"):"string"===typeof a?$(a+" .tip"):$(".tip")).each(function(){var a,d=$(this);d.parent().hover(function(c){a=setTimeout(function(){var a=d.text().length,b=c.clientX,e=c.clientY,v=t.width(),G=t.height(),a=Math.min(260+a/5>>0,Math.max(v-b,b)-40);d.width(a);e=e>G/2?e-d.height()-20:e+20;d.css({top:e,left:b>G/2?b-a-20:b+20}).fadeIn(200)},
d.attr("data-delay")||400)},function(){clearTimeout(a);d.fadeOut(200)}).click(function(){clearTimeout(a)})})};c.checkSignup=ta;var V;c.showLogin=U;c.googleAuthInit=function(){gapi.load("auth2",function(){gapi.auth2.init({client_id:"16163237658-20l9nkv7bci04f890j3rocd67cpdbmu0.apps.googleusercontent.com",cookie_policy:"single_host_origin"}).then(function(){$(".google-login-btn").removeClass("loading")},function(a){error_dialog("Google authentication failed to load. Error message from Google: "+a.details)})})};
c.navKeys=ca;var la=!1;c.comment=ka;var Y;c.loading=e;var da;c.progress=function(a){da||($("#site-loading-bar").show(),da=$("#site-loading-progress"));da.width(100*a+"%")};c.submitImg=wa;c.signCanvas=function(a,b,c,e,t,u,A){e=e||4E4;if(("pro"===I.user.pro_type||"pro_basic"===I.user.pro_type&&t)&&(u||$(".gen-no-watermark")).prop("checked")||b*c<=e)return!1;a.save();a.font="10px Arial";a.fillStyle="#ddd";a.shadowBlur=2;a.shadowColor="#000";for(b=0;7>b;b++)a.fillText(A||"imgflip.com",3,c-4);a.restore();
return!0};c.upgradeBox=function(a,b){var c="/pro?from="+b;a=a.replace(/Imgflip Pro/,'<a href="'+c+'">Imgflip Pro</a>');BOX.show({html:'<div class="pro-msg">'+a+'</div><a class="b but pro-learn-more" href="'+c+'">Learn More &rsaquo;</a>',w:500,pad:20})};c.isValidImgUrl=function(a){if(!a.match(/^https?:\/\//))return!1;if(!c.URL)return!0;try{var b=new URL(a)}catch(d){return!1}return b&&b.hostname&&b.hostname!==location.hostname&&"/"!==b.pathname};(function(a){function b(b){$(".main-tag").change(function(){var f=
"",k=[];k[0]=$("#show-other")[0];k[1]=$("#show-memes")[0];k[2]=$("#show-gifs")[0];for(var h=0;3>h;h++)f=k[h].checked?f+"1":f+"0";_gaq.push(["_trackEvent","main_tags",(T()?"logged-in: ":"")+f,a.location.href]);$.ajax({url:"/ajax_main_tags",type:"post",dataType:"json",data:{cookie_tags:f},success:b})});G.on("click","#safe-button",function(a){if(!I.done)return K(a);var k=$(this).closest(".check-wrap"),h=k.hasClass("checked")?"SFW":"NSFW";_gaq.push(["_trackEvent","SFW Button",("SFW"===h?"NSFW":"SFW")+
" --\x3e "+h,(T()?"":"not ")+"logged in"]);if(!T())return K(a),U();k.toggleClass("checked","NSFW"===h);$.ajax({url:"/ajax_safemode",type:"post",dataType:"json",data:{safe:h},success:b})})}function c(a){a&&location.reload()}function r(a){a&&$("#flip-notify").html("Your next flip will reflect your new settings").fadeIn()}function R(){G.on("contextmenu",".ctx-gif",function(b){var f=$(this),k=f.data("src")||f.attr("src"),h=/\/([a-z0-9]+)\.gif/.exec(k);if(h)return k=I.user.id&&a.img&&I.user.id===img.uid&&
f.is("video"),h=h[1],_gaq.push(["_trackEvent","gif contextmenu",location.pathname,h]),f=f.closest(".base-unit,#img-main").find(".shr-open-btn"),v(h,"gif",f.data("title"),f.data("generator"),!1,k),K(b)}).on("click",".img-code",function(){$(this).select()}).on("click",".img-download,.img-code",function(){_gaq.push(["_trackEvent",$(this).attr("class"),location.pathname,$(this).attr("href")])})}function u(){G.on("vclick",".pause-gif",function(a){var f=$(this),b=f.find("img"),h=b.attr("src");h&&(b.attr("src",
h.replace("/2/","/").replace(".jpg",".gif")),f.removeClass("pause-gif"));return K(a)})}function A(a,f,b,h,c,d){var e,g;switch(c){case "gif":e="GIF Maker";g="gif-maker";break;case "meme":e="Meme Generator";g="memegenerator";break;case "pie":e="Chart Maker",g="chart-maker"}var m=a+"."+f,l="https://i.imgflip.com/"+m,n="https://imgflip.com/"+("gif"===f?"gif/":"i/")+a,p="";b||(p+='<div class="img-code-wrap"><div class="img-code-label">Image Link:</div><input type="text" class="img-code link" value="'+
n+'"/></div><div class="img-code-wrap"><div class="img-code-label">BBCode (forums):</div><input type="text" class="img-code forum" value="'+("[url="+n+"][img]"+l+"[/img][/url]"+(e?"[url=https://imgflip.com/"+g+"]via Imgflip "+e+"[/url]":""))+'"/></div><div class="img-code-wrap"><div class="img-code-label">Image HTML:</div><input type="text" class="img-code html" value=\''+('<a href="'+n+'"><img src="'+l+'"'+(c?' title="made at imgflip.com"':"")+"/></a>")+"'/></div>");h||(b="https://"+(b?"i2-download":
"i-download")+".imgflip.com/",p+='<div class="img-download-btns"><a target="_blank" class="img-download l but" href="'+b+m+'">'+("gif"===f?"Download .gif":"Download Image")+"</a>"+(d?'<a target="_blank" class="img-download l but" href="'+b+a+'.mp4">Download .mp4</a>':"")+"</div>");return p}function v(a,f,b,h,c,d){a='<div class="shr-popup"><div class="shr-btns-label">Share Link</div>'+getShareButtonsHtml(a,f,b)+A(a,f,!1,!1!==c,h,d)+"</div>";BOX.show({html:a})}function V(){for(var b=$(this),f=b.closest(".shr-btns"),
k=encodeURIComponent(f.data("url")),h=encodeURIComponent(f.data("img")),f=encodeURIComponent(f.data("title")),c="",b=b.attr("class").split(/\s+/),d=0;d<b.length;d++){var e=b[d].replace("shr-","");switch(e){case "fb":c="https://www.facebook.com/sharer/sharer.php?u="+k;break;case "tw":c="https://twitter.com/intent/tweet?url="+k+"&text="+f+"&via=imgflip";break;case "pi":c="https://www.pinterest.com/pin/create/button/?url="+k+"&description="+f+"&media="+h;break;case "re":c="https://www.reddit.com/submit?url="+
k+"&title="+f;break;case "tu":c="https://www.tumblr.com/widgets/share/tool?shareSource=legacy&canonicalUrl=&url="+k+"&title="+f;break;case "gm":c="https://mail.google.com/mail/u/0/?view=cm&fs=1&to&su="+f+"&body="+k+"&ui=2&tf=1";break;case "em":c="mailto:?subject="+f+"&body="+k}if(c){_gaq.push(["_trackEvent","share","click "+e,location.pathname]);break}}a.open(c)}function W(){var a=$(this),b=a.closest(".shr-btns");navigator.share({title:b.data("title"),url:b.data("url")});_gaq.push(["_trackEvent",
"share","click "+a.text(),location.pathname])}function g(){_gaq.push(["_trackEvent","share","click "+$(this).attr("class"),location.pathname])}function D(){e("Fetching approval history");$.ajax({url:"/ajax_get_approval_history",dataType:"json",data:{iid:img.id},success:function(a){e(!1);a.error?error_dialog(a.error):BOX.show({html:a.html})}})}function H(){e("Fetching image stats");J=J||$.getScript("https://www.gstatic.com/charts/loader.js");$.ajax({url:"/ajax_get_img_stats",dataType:"json",data:{iid:img.id},
success:function(a){e(!1);a.error?error_dialog(a.error):(BOX.show({html:a.html}),J.done(function(){google.charts.load("current",{packages:["line"],callback:function(){for(var b=0;b<a.charts.length;b++){var k=a.charts[b],h=k[0],c=k[1],k=k[2],d=new google.visualization.DataTable;d.addColumn("datetime","Time");d.addColumn("number","Views");for(var e=0;e<c.length;e++)d.addRow([new Date(1E3*c[e][0]),c[e][1]]);h={chart:{title:h},height:300,legend:{position:"none"},hAxis:{title:"time"}};(new google.charts.Line($(k)[0])).draw(d,
h)}}})}))}})}function y(){$.ajax({url:"/ajax_move_to_images",type:"post",dataType:"json",data:{iid:img.id},success:function(a){a.error?error_dialog(a.error):$("#img-move-to-images").fadeOut()}})}function L(){$.ajax({url:"/ajax_moderate",type:"post",dataType:"json",data:{action:"approve",live:1,iid:img.id},success:function(){$("#img-approve").fadeOut()}})}function l(){w(img.id,!0,function(){$("#img-disapprove").fadeOut()})}function m(){confirm("Permanently delete this image?")&&(e("Deleting image"),
$.ajax({url:"/ajax_img_delete",type:"post",dataType:"json",data:{iid:img.id},success:function(b){b.error?(e(!1),error_dialog(b.error)):a.location="/creations"}}))}function n(){e("Updating Image");$.ajax({url:"/ajax_img_update",type:"post",dataType:"json",data:{iid:img.id,title:$("#img-title-edit").val(),tags:$("#img-tags-edit").val(),nsfw:$("#img-nsfw-edit").prop("checked")?1:0,anon:$("#img-anon-edit").prop("checked")?1:0,desc:$("#img-desc-edit").val(),main_tag:$('input[name="img-main-tag-edit"]:checked').val()},
success:function(b){b.error?(e(!1),error_dialog(b.error)):a.location=a.location.href.replace(/\?lerp=[0-9]+/,"")+"?lerp="+ +new Date}})}function p(){p.done||(p.done=!0,z())}function z(){var a=$('<div class="load load-dark">');$("#img-admin").append(a);$.ajax({url:"/ajax_img_admin",data:{iid:img.id},success:function(a){$("#img-edit-btn").remove();$("#img-admin").append(a)},complete:function(){a.remove()}})}function F(a,b,k,h){if(!P){var c=[],d=$("#img-coms");b&&d.find(".l0").quickEach(function(){c.push(this.attr("id").substr(3))});
var c=c.join(","),e=a+":"+c,g=function(a){var h;b?(h=d.find(".com"),d.append(a.html),h=d.find(".com").not(h)):(d.html(a.html),h=d.find(".com"));$("#img-coms-title").text(a.count+" Comment"+(1===a.count?"":"s"));$("#c-more-btn").toggleClass("display-none",a.count<=d.find(".com").length);ma(h);k&&k()};if(x[e])g(x[e]);else{var m=$('<div class="load load-dark">');b?d.append(m):d.prepend(m);P=!0;$.ajax({url:"/ajax_get_comments",data:{iid:img.id,sort:a,skip_ids:c,required_id:h||"",stream_mod_uids:img.stream_mod_uids},
dataType:"json",success:function(a){a.error?error_dialog(a.error):(x[e]=a,g(a))},complete:function(){m.remove();P=!1}})}}}function B(){var a=$(this),b=a.closest(".i-select-wrap").find(".i-select-btn");b.click();var k=a.data("sort"),h=a.text();F(k,!1,function(){b.text(h);a.siblings().removeClass("on");a.addClass("on")})}function N(a,b){var k=$("#img-coms-sort-wrap .on").data("sort");F(k,!0,b,a)}function O(){var a=$("#img-coms-title"),b=$("#img-coms"),k=b.hasClass("collapsed");k?a.find("#img-coms-title-msg").remove():
a.append('<span id="img-coms-title-msg">click to show</span>');b.toggleClass("collapsed",!k)}function C(a){K(a);$(this).closest(".menu-wrap").find(".menu").toggle()}function M(a){var b=new X({html:'<div class="feedback-wrap"><div class="feedback-title">Submit Feedback</div><div class="feedback-intro">If you\'d like a response, specify your email. If you\'re submitting a bug report about a broken feature, please give as many details as possible about how it broke, otherwise it may be very hard to fix. If you would like to start a discussion with the community about an Imgflip feature, you can also post in the <a href="/m/imgflip">Imgflip Stream</a>.</div><p>Your name <small>(optional)</small></p><p><input type="text" class="feedback-name"/></p><p>Your email <small>(optional)</small></p><p><input type="email" class="feedback-email"/></p><textarea class="feedback-text"></textarea><div class="feedback-submit b but">Submit Feedback</div></div>',
onclose:function(a){a=a.el();if((a.find(".feedback-name").val()||a.find(".feedback-email").val()||a.find(".feedback-text").val())&&!confirm("Are you sure you want to toss the feedback you have written?"))return!1}});b.el().data({from:a||"",box:b})}function q(b){var f=I.user,k,h;f.id?($(".gen-anon-wrap").show(),f.pro_type&&($("#logo").after('<div id="pro-logo">pro'+("pro_basic"===f.pro_type?"*":"")+"</div>"),$(".pro-callout").remove()),k='<a href="/user/'+esc(f.user)+'">Profile</a><a href="/creations">My Images</a>'+
(f.owns_streams?'<a href="/my-streams">My Streams</a>':"")+'<a href="/notifications" id="menu-nots">Notifications</a><a href="/settings">Settings</a><a id="aLogout" href="javascript:void(0)">Logout</a>',h='<span id="u-user">'+esc(f.user)+'</span> <small>(<span id="u-points">'+esc(f.points)+"</span>)</small> ",$("#u-menu-wrap").after('<div id="nt-count"'+(f.nots?' class="has-nots"':"")+">"+esc(f.nots)+"</div>")):($(".gen-login-wrap").show(),$("#u-anon").show(),k='<a href="javascript:void(0)" class="show-login">Login</a><a href="/signup">Signup</a>',
h="Login ");$("#u-menu").html(k);$("#u-long").html(h);k=a.location.pathname.split("/")[1];switch(k){case "memegenerator":f.pro_type||!a.sfw||b||$(".head").prepend(E("memegen_banner_top","div-gpt-ad-1569263047953-0","ad"));break;case "gif-maker":f.pro_type||b||$(".head").prepend(E("gifgen_banner_top","div-gpt-ad-1569263197831-0","ad"));a.proStatusChanged&&a.proStatusChanged();a.ajaxGetRecentVideos&&a.ajaxGetRecentVideos();break;case "chart-maker":f.pro_type||b||$(".head").prepend(E("chartgen_banner_top",
"div-gpt-ad-1571701385607-0","ad"));break;case "demotivational-maker":f.pro_type||b||$(".head").prepend(E("demogen_banner_top","div-gpt-ad-1571701431130-0","ad"));break;case "i":case "gif":if(!b){var c=I.user;h=c.cookie_tags;var d=["other","memes","gifs"];if(c.id){if(c.id===img.uid||-1!==img.stream_mod_uids.indexOf(c.id)||3<=c.priv){var e=img.uid===I.user.id,g="";img.submitted&&(g=img.featured?"<span class='my-label-featured'>Featured</span>":"<span class='my-label-submitted'>Submitted</span>",g=
img.stream_name?g+(" in <a href='/m/"+esc(img.stream_name)+"'>"+esc(img.stream_name)+"</a>"):g+" in [deleted stream]");var r="",q="",u="",v="",w="",x="",A="",B="",F="",C=-1!==img.stream_mod_uids.indexOf(I.user.id)||3<=I.user.priv;if(!img.featured||C)r='<div id="img-edit-btn" class="l but sml">Edit Image</div>';if(e||5<=I.user.priv)q='<div id="img-delete" class="l but sml">Delete Image</div>';C&&(v='<div id="img-approval-history-btn" class="l but sml">Approval History</div>');if(e||C)w='<div id="img-stats-btn" class="l but sml">Image Stats</div>';
e&&img.can_submit&&(u="<span class='my-submit-btn l but sml' data-iid='"+esc(img.id)+"'>Submit image to the Imgflip community</span>");C&&(x="<div id='img-disapprove' class='l but sml display-none'>Disapprove</div>");5<=I.user.priv&&(A="<div id='img-approve' class='l but sml display-none'>Approve</div>");9<=I.user.priv&&(B="<div id='img-move-to-images' class='l but sml display-none'>Move to Images</div>");C&&(F="<div id='img-show-gen-options' class='l but sml display-none'>Creation Settings</div>");
e='<div id="img-admin" class="img-pane">'+(g?'<div class="my-submit-status">'+g+"</div>":"")+'<div class="img-admin-btns">'+u+r+q+v+w+x+A+F+B+"</div></div>";$("#fNav").after(e);G.on("click","#img-edit-btn",p).on("click","#img-delete",m).on("click","#img-update",n).on("click","#img-approve",L).on("click","#img-disapprove",l).on("click","#img-approval-history-btn",D).on("click","#img-stats-btn",H).on("click","#img-move-to-images",y);3<=c.priv&&z()}"1"===I.vote&&$(".img-up").addClass("set");"0"===I.vote&&
$(".img-down").addClass("set");ma()}c=0<c.flags?"NSFW":"SFW";$(".main-tags").append('<label class="check-wrap'+("NSFW"===c?" checked":"")+'"><input id="safe-button" type="checkbox"'+("NSFW"===c?" checked":"")+' /> <span class="checkbox-text">NSFW</span></label>');for(c=0;3>c;c++)"1"===h.charAt(c)&&$("#show-"+d[c]).prop("checked",!0);I.can_claim&&$("#img-panel").before('<div class="ibox img-claim-msg">You created this image, but you were not logged in. You\'ll only be able to claim it for up to an hour after you created it. <a href="/login?claim_iid='+
img.id+'">Login to claim or delete it</a></div>')}f.pro_type||b||!a.sfw||img.author_pro||$("#img-panel").before(E("imgpage_banner","div-gpt-ad-1569261686137-0","img-ad"))}!b&&!f.pro_type&&1E3<t.width()&&720<t.height()&&$("head").append('<script async src="https://arc.io/widget.js#V3b3LyA4?CDN='+("demotivational-maker"===k?"True":"False")+'">\x3c/script>');a.mm&&mm.toggleSetDefaultSettingsBtn();a.toggleSaveSettingsBtn&&toggleSaveSettingsBtn()}a.embedCodes=A;a.getShareButtonsHtml=function(a,b,k){var h=
"https://imgflip.com/"+("gif"===b?"gif/":"i/")+a;a="https://i.imgflip.com/"+a+"."+b;b="";navigator.share&&(b="your device",navigator.platform&&/iPad|iPhone|iPod/.test(navigator.platform)?b="iOS":-1!==navigator.userAgent.toLowerCase().indexOf("android")&&(b="Android"));return'<div class="shr-btns" data-url="'+esc(h)+'" data-img="'+esc(a)+'" data-title="'+esc(k)+'"><div class="shr-btn shr-fb" title="Facebook"><svg viewBox="0 0 12 12"><path d="M9.1.1V2H8c-.4 0-.7.1-.9.3-.1.1-.2.4-.2.7v1.4H9l-.2 2.1H6.9V12H4.7V6.5H2.9V4.4h1.8V2.8c0-.9.3-1.6.7-2.1C6 .2 6.6 0 7.5 0c.7 0 1.2 0 1.6.1z"/></svg></div><div class="shr-btn shr-tw" title="Twitter"><svg viewBox="80 80 240 240"><path d="M153.6 301.6c94.4 0 146-78.2 146-146 0-2.2 0-4.4-.2-6.6a104.4 104.4 0 0 0 25.6-26.5 102.4 102.4 0 0 1-29.5 8 51.5 51.5 0 0 0 22.6-28.3 102.8 102.8 0 0 1-32.6 12.4 51.3 51.3 0 0 0-87.4 46.8 145.6 145.6 0 0 1-105.7-53.6 51.3 51.3 0 0 0 15.9 68.5 51 51 0 0 1-23.3-6.4v.6a51.3 51.3 0 0 0 41.1 50.3 51.2 51.2 0 0 1-23.1.9 51.4 51.4 0 0 0 48 35.6 103 103 0 0 1-63.8 22 104.4 104.4 0 0 1-12.2-.8 145.2 145.2 0 0 0 78.6 23"/></svg></div><div class="shr-btn shr-pi" title="Pinterest"><svg viewBox="0 0 312.5 312.5"><path d="M153.8 3.8a152.5 152.5 0 0 0-55.6 294.5c-1.3-12-2.5-30.6.6-43.8l17.8-75.8s-4.5-9.1-4.5-22.6c0-21.2 12.3-37 27.6-37 13 0 19.3 9.7 19.3 21.4 0 13.1-8.4 32.7-12.7 50.8-3.6 15.2 7.6 27.5 22.6 27.5 27.1 0 48-28.5 48-69.8 0-36.5-26.3-62-63.7-62a66 66 0 0 0-68.9 66.2c0 13 5 27.1 11.4 34.8a4.6 4.6 0 0 1 1 4.3l-4.2 17.3c-.7 2.8-2.2 3.4-5.1 2-19-8.8-31-36.7-31-59 0-48.1 35-92.3 100.8-92.3 52.9 0 94 37.7 94 88 0 52.6-33.2 95-79.1 95-15.5 0-30-8.1-35-17.6l-9.5 36.3a170.4 170.4 0 0 1-19 40 152.4 152.4 0 0 0 197.7-145.8C306.3 72 238 3.8 153.8 3.8"/></svg></div><div class="shr-btn shr-re" title="Reddit"><svg viewBox="3 3 14 14"><path d="M16.67 10a1.46 1.46 0 0 0-2.47-1 7.12 7.12 0 0 0-3.85-1.23L11 4.65l2.14.45a1 1 0 1 0 .13-.61L10.82 4a.31.31 0 0 0-.37.24l-.74 3.47a7.14 7.14 0 0 0-3.9 1.23 1.46 1.46 0 1 0-1.61 2.39 2.87 2.87 0 0 0 0 .44c0 2.24 2.61 4.06 5.83 4.06s5.83-1.82 5.83-4.06a2.87 2.87 0 0 0 0-.44 1.46 1.46 0 0 0 .81-1.33zm-10 1a1 1 0 1 1 1 1 1 1 0 0 1-1-1zm5.81 2.75a3.84 3.84 0 0 1-2.47.77 3.84 3.84 0 0 1-2.47-.77.27.27 0 0 1 .38-.38A3.27 3.27 0 0 0 10 14a3.28 3.28 0 0 0 2.09-.61.27.27 0 1 1 .39.4zm-.18-1.71a1 1 0 1 1 1-1 1 1 0 0 1-1.01 1.04z"/></svg></div><div class="shr-btn shr-tu" title="Tumblr"><svg viewBox="46 40 170 170"><path d="M168 171c-2.9 1.3-8.6 2.6-12.8 2.7-12.8.3-15.3-9-15.4-15.8v-49.7H172V84.1h-32V43.4h-23.3c-.4 0-1.1.3-1.2 1.2-1.4 12.4-7.2 34.3-31.4 43v20.6h16.2v52.2c0 17.9 13.1 43.2 48 42.6 11.6-.2 24.7-5 27.6-9.3l-7.7-22.8"/></svg></div><div class="shr-btn shr-gm" title="Gmail"><svg viewBox="7 7 50 50"><path fill="#EAEAEA" d="M53 50H11a3 3 0 0 1-3-3V17a3 3 0 0 1 3-3h42a3 3 0 0 1 3 3v30a3 3 0 0 1-3 3z"/><path fill="#D54C3F" d="M14 50h-3a3 3 0 0 1-3-3V17a3 3 0 1 1 6 0v33z"/><path fill="#B63524" d="M50 50h3a3 3 0 0 0 3-3V17a3 3 0 1 0-6 0v33z"/><path fill="#DE5145" d="M54.7 19.5a3 3 0 1 0-3.4-5L32 28.5l-19.3-14a3 3 0 0 0-3.4 5l-.1-.1L32 36"/><line fill="#DE5145" x1="54.799" y1="19.401" x2="32" y2="36"/><path fill="#EFEFEF" d="M53 14a3 3 0 0 0-1.7.5L32 28.5l-19.3-14A3 3 0 0 0 11 14h42z"/><path fill="#C64132" d="M14 24.2l-5-5 .3.3-.1-.1 4.8 3.5v1.3"/><polyline fill="#E3E3E3" points="28.668,38.591 14,50 14.001,24.063 28.665,38.587"/><polygon fill="#C8C8C8" points="28.668,38.591 32,36 14.001,22.896 14.001,24.063 28.665,38.587"/><polygon fill="#D9D9D9" points="40.061,50 50,50 50,22.895 32,36 28.665,38.587"/></svg></div><div class="shr-btn shr-em" title="Email"><svg viewBox="0 0 100 100"><path d="M8,18l84,0l0,64l-84,0l0,-64l42,32l42,-32"/></svg></div>'+
(b?'<div class="shr-btn-device lb but">Share via '+b+"</div>":"")+"</div>"};var E=a.adCode=function(b,f,k,h){if(I.user.pro_type)return"";$.getScript("https://securepubads.g.doubleclick.net/tag/js/gpt.js");$.getScript("https://tags-cdn.deployads.com/a/imgflip.com.js");a.googletag=a.googletag||{cmd:[]};a.deployads=a.deployads||[];googletag.cmd.push(function(){var a=googletag.sizeMapping();h?a.addSize([360,0],[[336,280],[300,250]]).addSize([0,0],[[300,250]]):a.addSize([760,0],[[728,90],[728,15],[468,
60],[320,50],[300,50]]).addSize([500,0],[[468,60],[320,50],[300,50]]).addSize([0,0],[[320,50],[300,50]]);a=a.build();googletag.defineSlot("/168777013/"+b,[],f).defineSizeMapping(a).addService(googletag.pubads());googletag.pubads().enableSingleRequest();deployads.push(function(){deployads.gpt.enableServices()})});return'<div id="'+f+'" class="'+k+'"><script>googletag.cmd.push(function(){deployads.push(function(){deployads.gpt.display("'+f+'")})})\x3c/script></div>'};a.form_values=function(a){var b=
{};a.find("input,textarea,select").each(function(){var a=$(this);switch(a.attr("type")){case "checkbox":b[a.attr("name")]=a.prop("checked")?1:0;break;case "submit":break;default:b[a.attr("name")]=a.val()}});return b};var J,w=a.disapproveImgPopup=function(a,b,c){var h="";b&&(h+='<div class="img-disapprove-warning">This image is currently featured. Disapproving it will remove it from all featured pages. This should generally only be done when the image violates Imgflip terms of service or the stream rules.</div>');
var h=h+'<div class="img-disapprove-reason-label">Reason for Disapproval</div><div class="select">',h=h+'<select class="img-disapprove-reason">',h=h+'<option value="other">Other</option>',h=h+'<option value="repost">Repost/Uncreative</option>',h=h+'<option value="political">Political</option>',h=h+'<option value="spam">Spam</option>',h=h+'<option value="harassment">Harassment</option>',h=h+'<option value="wrong_stream">Wrong Stream (violates posting rules)</option>',h=h+'<option value="wrong_language">Text in Wrong Language for Stream</option>',
h=h+"</select>",h=h+"</div>",h=h+'<div class="img-disapprove-notify-warning">If you select a reason other than "Other" or specify a message, the user will receive a notification explaining why their image was disapproved and how to fix it in the future.</div>',h=h+'<textarea class="img-disapprove-note" placeholder="Notes to be sent to user (optional)"></textarea>',h=h+'<div class="img-disapprove-submit r but">Disapprove</div>',d=new X({html:h,pad:20,w:600}),g=d.el();g.on("click",".img-disapprove-submit",
function(){e("Disapproving image");$.ajax({url:"/ajax_moderate",type:"post",dataType:"json",data:{action:"disapprove",iid:a,reason:g.find(".img-disapprove-reason").val(),note:g.find(".img-disapprove-note").val()},success:function(a){e(!1);a.error?error_dialog(a.error):(d.hide(),c&&c())}})})},x={},P=!1,S=a.addGifPlayButtons=function(a){$(a).each(function(){var a=$(this),b=a.parent().parent(),h=function(){b.addClass("pause-gif");a.on("vclick",function(c){var h=b.hasClass("pause-gif");b.removeClass("pause-gif");
a[0].play();if(h)return K(c)})},c=a[0].play();c?c["catch"](h):h()})};a.openFeedback=M;I.done&&q();$(function(){nt=nt_off=nt_on=0;$(".menu-wrap").each(function(){var a=$(this),b=a.find(".menu");a.hover(function(){b.show()},function(){b.hide()})});G.on("vclick",".i-select-btn",function(){var a=$(this),b=a.siblings(".i-select-dropdown");if(b.hasClass("hidden")){var c=t.width(),h={left:"auto",right:"auto"},d=a.offset().left,a=d+a.width();h[a>c-d?"right":"left"]=0;b.css(h);b.removeClass("hidden");var e=
function(){b.addClass("hidden");$d.off("vclick",e)};$d.on("vclick",e);b.data("close",e);$(".i-select-dropdown").not(b).each(function(){var a=$(this).data("close");a&&a()})}else b.addClass("hidden")}).on("vclick",".i-select-more-btn",function(a){$(this).closest(".i-select-dropdown").find(".display-none").removeClass("display-none");$(this).remove();a.preventDefault()}).on("vclick",".i-select-wrap",ba).on("vclick",".my-submit-btn",function(){wa($(this).attr("data-iid"))}).on("click",".img-flag-cancel",
Ja).on("click",".img-flag-submit",Ka).on("click",".img-flag-btn",Ia).on("vclick",".img-flip",va).on("vclick",".menu-btn",C).on("vclick",".menu-wrap",ba).on("vclick",function(){$(".menu").hide()}).on("click","#panel-search-icon",function(){$("#panel-search-back").toggleClass("hidden");$("#panel-search-input").focus()}).on("click",".s-submit",function(){$(this).prev(".s-form").submit()}).on("click",".show-login",function(){U()}).on("vclick","#nt-count",Ca).on("vclick","#aLogout",Aa).on("click",".google-login-btn",
function(){gapi.auth2.getAuthInstance().signIn({scope:"profile email"}).then(Ba)}).on("click",".feedback-open",function(){M($(this).data("from"))}).on("click",".feedback-submit",function(){var a=$(this).closest(".BOX"),b=a.find(".feedback-text").val();b?(e("Submitting feedback"),$.ajax({url:"/ajax_submit_feedback",type:"post",dataType:"json",data:{name:a.find(".feedback-name").val(),email:a.find(".feedback-email").val(),text:b,url:location.href,from:a.data("from"),width:$w.width(),height:$w.height(),
user_agent:navigator.userAgent,concurrency:navigator.hardwareConcurrency,memory:navigator.deviceMemory,page_html:$("html").html()},success:function(b){e(!1);b.error?error_dialog(b.error):(a.data("box").hide(!0),MSG(b.msg,"green"))}})):MSG("Enter some feedback first!","red")}).on("click",".shr-open-btn",function(){var a=$(this);v(a.data("id"),a.data("ext"),a.data("title"),a.data("generator"));_gaq.push(["_trackEvent","share","open",location.pathname])}).on("click",".shr-btn",V).on("click",".shr-btn-device",
W).on("click",".shr-popup .img-code",g).on("click",".c-text img,.magnify",function(){var a=$(this);if(a.is("video")){var b=a.data("w"),c=a.data("h"),h=t.width(),d=t.height();b/c>h/d?(h=Math.min(b,h),d=c/b*h):(d=Math.min(c,d),h=b/c*d);a=a.clone().attr("id",null).removeClass("magnify").css({verticalAlign:"top",width:h,height:d});new X({html:a,bg:"transparent"});a[0].play()}else(new X({img:a.attr("src")})).el().find("img").toggleClass("ctx-gif",a.hasClass("ctx-gif"))}).on("click",".c-img-link",function(){var b=
$(this),c=b.data("shown");if(c)b.next(".c-img").hide(),b.data("shown",!1);else{if(!1===c)b.next(".c-img").show();else{var c="//"+b.text().split(" ")[0],d=c.match(/\/([a-z0-9]+)\.gif/);d&&a.gifVideoIids&&-1!==gifVideoIids.indexOf(parseInt(d[1],36)+"")?(b.after('<div class="c-img pause-wrap"><video disableRemotePlayback autoplay muted loop ><source type="video/mp4" src="//i.imgflip.com/'+d[1]+'.mp4"></video></div>'),S(b.next().find("video"))):b.after('<img class="c-img" src="'+c+'"/>')}b.data("shown",
!0)}});applyTips();R();u()});a.initHome=function(){var g=$(".base-unit").eq(5),f=ga(function(){100>g.offset().top-t.height()-t.scrollTop()&&($("div.base-img").quickEach(function(){this.replaceWith('<img class="'+this.attr("class")+'" src="'+this.data("src")+'" alt="'+this.data("alt")+'"/>')}),t.off("scroll",f))});g[0]&&(t.on("scroll",f),f());G.on("vclick",".base-toggle-more",function(a){$("#leaderboard,#base-top-memes,.base-create").toggleClass("force-show");return K(a)}).on("click",".stream-follow-btn,.stream-unfollow-btn",
function(){if(I.user.id){var a=$(this),b=a.hasClass("stream-follow-btn");e();$.ajax({url:"/ajax_follow_stream",type:"post",dataType:"json",data:{stream_id:a.data("id"),follow:b?1:0},success:function(c){e(!1);c.error?error_dialog(c.error):(a.siblings(".stream-follow-btn,.stream-unfollow-btn").removeClass("hidden"),a.addClass("hidden"),b&&MSG("This stream will now show up in your stream dropdown","green"))}})}else U()}).on("click",".base-vote .img-audio-toggle",function(){ua($(this),$(this).closest(".base-unit").find("video"))}).on("click",
".img-up,.img-down",function(){var a=$(this);Z(a.closest(".base-vote").data("iid"),a.hasClass("img-up")?1:0,this.parentNode)}).on("vclick",".base-img-more-btn",function(b){var c=$(this),f=c.closest(".base-img-wrap-wrap"),d=c.data("prev_height");d&&a.scrollTo(0,$(a).scrollTop()-f.outerHeight()+d);c.data("prev_height",d?!1:f.height());f.toggleClass("base-img-showing-more",!d);c.text(d?"Show More":"Show Less");return K(b)});S("video.base-img");b(c)};a.initFlip=function(){if(a.img){b(r);$("#c-new-main").find(".c-new-text").focus(function(){I.done&&
!T()?U():!I.done||I.user.email_verified||I.user.pro_type||ja()});$("#img-prev,#img-next").click(function(b){var c=$(this).attr("href");_gaq.push(["_set","hitCallback",function(){a.location=c}]);_gaq.push(["_trackEvent","Flip Nav",$(this).attr("id"),location.href]);a.gaon||(a.location=c);K(b)});$(".img-down").click(function(){Z(img.id,0,this.parentNode)});$(".img-up").click(function(){Z(img.id,1,this.parentNode)});ca();G.on("focus","input,textarea",function(){ca(!1)}).on("blur","input,textarea",ca).on("click",
".bad-com",function(){var a=$(this),b=a.closest(".com"),c=b.find(".c-text"),f=c.data("text");f&&c.append('<div class="c-textonly">'+f+"</div>");b.removeClass("hidden");for(b=b.next();b.hasClass("child-of-bad");)b.removeClass("child-of-bad"),b=b.next();a.remove()}).on("click",".c-up,.c-down",Ha).on("click",".c-delete",Da).on("click",".c-reply",Fa).on("click",".c-flag",Ea).on("click",".c-add-btn",function(){ka(img.id,$(this).closest(".c-new-wrap"))}).on("keydown",".c-new-text",function(a){13===a.which&&
(a.metaKey||a.ctrlKey)&&ka(img.id,$(this).closest(".c-new-wrap"))}).on("click",".c-meme-btn",function(){I.done&&!T()?U():!I.done||I.user.email_verified||I.user.pro_type?I.done&&T()&&showGenerator($(this).closest(".c-new-wrap")):ja()}).on("click",".c-right",function(a){if(-1!=="com c-right c-text c-textonly c-stats c-points c-reply-count".split(" ").indexOf($(a.target).attr("class"))){a=$(this).closest(".com");for(var b=~~a.data("l"),c=a.next(),f=a.hasClass("collapsed"),d=!1;~~c.data("l")>b;)f?c.show():
c.hide(),c=c.next(),d=!0;d&&a.toggleClass("collapsed",!f)}}).on("click",".img-audio-toggle",function(){ua($(this),"#img-wrap video")}).on("click","#img-coms-sort-wrap .i-select-link",B).on("click","#img-coms-title",O).on("click","#c-more-btn",function(){N()});var c=$(".com").eq(7),f=ga(function(){100>c.offset().top-t.height()-t.scrollTop()&&($(".c-lazy-img").quickEach(function(){this.replaceWith('<img src="'+this.data("src")+'" alt="'+this.attr("alt")+'"/>')}),t.off("scroll",f))});c[0]&&(t.on("scroll",
f),f());"gif"===img.type&&S("video#vid");var d=location.hash;d&&0===d.search(/^#com[0-9]+$/)&&($(d)[0]?$(d).addClass("c-linked"):(e("Loading Comment"),N(d.substr(4),function(){e(!1);var b=$(d);b[0]&&(a.scrollTo(0,b.offset().top),b.addClass("c-linked"))})))}};a.initData=q})(c);(function(a,b,c,e){function t(a){for(;a&&"undefined"!==typeof a.originalEvent;)a=a.originalEvent;return a}function u(b){for(var c={},d,e;b;){d=a.data(b,m);for(e in d)d[e]&&(c[e]=c.hasVirtualBinding=!0);b=b.parentNode}return c}
function A(){B&&(clearTimeout(B),B=0);B=setTimeout(function(){P=B=0;M.length=0;q=!1;E=!0},a.vmouse.resetTimerDuration)}function v(b,c,d){var g,l;if(!(l=d&&d[b])){if(d=!d)a:for(d=c.target;d;){if((l=a.data(d,m))&&(!b||l[b]))break a;d=d.parentNode}l=d}if(l){g=c;d=g.type;var n,q;g=a.Event(g);g.type=b;b=g.originalEvent;l=a.event.props;-1<d.search(/^(mouse|click)/)&&(l=z);if(b)for(q=l.length,n;q;)n=l[--q],g[n]=b[n];-1<d.search(/mouse(down|up)|click/)&&!g.which&&(g.which=1);if(-1!==d.search(/^touch/)&&(n=
t(b),d=n.touches,n=n.changedTouches,b=d&&d.length?d[0]:n&&n.length?n[0]:e))for(d=0,l=p.length;d<l;d++)n=p[d],g[n]=b[n];a(c.target).trigger(g)}return g}function G(b){var c=a.data(b.target,n);q||P&&P===c||!(c=v("v"+b.type,b))||(c.isDefaultPrevented()&&b.preventDefault(),c.isPropagationStopped()&&b.stopPropagation(),c.isImmediatePropagationStopped()&&b.stopImmediatePropagation())}function K(b){var c=t(b).touches,d;c&&1===c.length&&(d=b.target,c=u(d),c.hasVirtualBinding&&(P=x++,a.data(d,n,P),B&&(clearTimeout(B),
B=0),C=E=!1,d=t(b).touches[0],N=d.pageX,O=d.pageY,v("vmouseover",b,c),v("vmousedown",b,c)))}function g(a){E||(C||v("vmousecancel",a,u(a.target)),C=!0,A())}function D(b){if(!E){var c=t(b).touches[0],d=C,e=a.vmouse.moveDistanceThreshold,g=u(b.target);(C=C||Math.abs(c.pageX-N)>e||Math.abs(c.pageY-O)>e)&&!d&&v("vmousecancel",b,g);v("vmousemove",b,g);A()}}function H(a){if(!E){E=!0;var b=u(a.target),c;v("vmouseup",a,b);!C&&(c=v("vclick",a,b))&&c.isDefaultPrevented()&&(c=t(a).changedTouches[0],M.push({touchID:P,
x:c.clientX,y:c.clientY}),q=!0);v("vmouseout",a,b);C=!1;A()}}function y(b){b=a.data(b,m);var c;if(b)for(c in b)if(b[c])return!0;return!1}function L(){}function l(b){var c=b.substr(1);return{setup:function(){y(this)||a.data(this,m,{});a.data(this,m)[b]=!0;F[b]=(F[b]||0)+1;1===F[b]&&w.bind(c,G);a(this).bind(c,L);J&&(F.touchstart=(F.touchstart||0)+1,1===F.touchstart&&w.bind("touchstart",K).bind("touchend",H).bind("touchmove",D).bind("scroll",g))},teardown:function(){--F[b];F[b]||w.unbind(c,G);J&&(--F.touchstart,
F.touchstart||w.unbind("touchstart",K).unbind("touchmove",D).unbind("touchend",H).unbind("scroll",g));var d=a(this),e=a.data(this,m);e&&(e[b]=!1);d.unbind(c,L);y(this)||d.removeData(m)}}}var m="virtualMouseBindings",n="virtualTouchID";b="vmouseover vmousedown vmousemove vmouseup vclick vmouseout vmousecancel".split(" ");var p="clientX clientY pageX pageY screenX screenY".split(" "),z=a.event.props.concat(a.event.mouseHooks?a.event.mouseHooks.props:[]),F={},B=0,N=0,O=0,C=!1,M=[],q=!1,E=!1,J="addEventListener"in
c,w=a(c),x=1,P=0,S;a.vmouse={moveDistanceThreshold:10,clickDistanceThreshold:10,resetTimerDuration:1500};for(var Q=0;Q<b.length;Q++)a.event.special[b[Q]]=l(b[Q]);J&&c.addEventListener("click",function(b){var c=M.length,d=b.target,e,g,l,m,p;if(c)for(e=b.clientX,g=b.clientY,S=a.vmouse.clickDistanceThreshold,l=d;l;){for(m=0;m<c;m++)if(p=M[m],l===d&&Math.abs(p.x-e)<S&&Math.abs(p.y-g)<S||a.data(l,n)===p.touchID){b.preventDefault();b.stopPropagation();return}l=l.parentNode}},!0)})(jQuery,c,ea)})(window,
document,$w,$d);
